<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AudioAnnotatr</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>AudioAnnotatr</h1>
      <div class="header-actions">
        <label class="file-picker">
          <input id="audioFileInput" type="file" accept="audio/*" />
          <span>Select audio…</span>
        </label>

        <label class="file-picker">
          <input id="importJsonInput" type="file" accept="application/json" />
          <span>Import annotations…</span>
        </label>

        <button id="exportJsonButton" disabled>Export JSON</button>
      </div>
    </header>

    <main class="app-main">
      <section class="player-section">
        <div class="audio-controls">
          <audio id="audioElement" controls preload="metadata"></audio>
          <div class="time-info">
            <div>
              <strong>Relative:</strong>
              <span id="relativeTimeLabel">00:00.000</span> /
              <span id="relativeDurationLabel">00:00.000</span>
            </div>
            <div>
              <strong>Absolute start:</strong>
              <input id="absoluteStartInput" type="datetime-local" step="1" />
              <button id="absoluteStartNowButton" title="Set to current time">Now</button>
              <span class="muted">(axis shows if set)</span>
            </div>
            <div>
              <strong>Absolute current:</strong>
              <span id="absoluteCurrentLabel">—</span>
            </div>
          </div>
        </div>

        <div class="waveform-container" id="waveformContainer">
          <canvas id="waveformCanvas"></canvas>
          <div class="waveform-help">
            Click on the waveform to seek. Shift+Click to add annotation at clicked time.
          </div>
        </div>

        <div class="timeline-controls">
          <label class="zoom-group">
            <span>Zoom</span>
            <input id="zoomSlider" type="range" min="1" max="50" step="0.1" value="1" disabled />
            <span id="zoomLabel" class="muted">x1.0</span>
          </label>
          <label class="offset-group">
            <span>Offset</span>
            <input id="offsetSlider" type="range" min="0" max="0" step="0.01" value="0" disabled />
            <span id="offsetLabel" class="muted">0.00s</span>
          </label>
        </div>
      </section>

      <section class="annotations-section">
        <div class="annotation-entry">
          <input id="annotationTextInput" type="text" placeholder="Annotation text…" />
          <button id="addAnnotationButton" disabled>Add at current time</button>
        </div>

        <div class="annotations-list" id="annotationsList"></div>
      </section>
    </main>

    <footer class="app-footer">
      <span>JSON stores relative times and metadata incl. absolute start.</span>
    </footer>

    <script src="app.js"></script>
  </body>
  </html>


